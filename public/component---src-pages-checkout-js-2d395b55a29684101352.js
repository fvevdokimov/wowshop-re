(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5NPn":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("91GP");var n=a("FdF9"),l="undefined"==typeof window,c=l?function(e){return{}}:function(e){return JSON.parse(localStorage.getItem(e))},r=l?function(e){return{}}:function(e,t){return localStorage.setItem(e,JSON.stringify(t))};function i(){var e,t,a,i,u=(e="cart",t=Object(n.useState)(c(e)||{}),a=t[0],i=t[1],[a,Object(n.useCallback)((function(t){i(t),r(e,t)}),[e,i])]),d=u[0],o=u[1],m=Object(n.useCallback)((function(e,t){var a=Object.assign({},d);a[e]=Object.assign({},d[e]||{count:0,sizeId:t}),a[e].count++,o(a)}),[d,o]),s=Object(n.useCallback)((function(e){var t=Object.assign({},d);delete t[e],o(t)}),[d,o]),f=Object(n.useCallback)((function(e){var t=e.id,a=e.count,n=e.sizeId,l=Object.assign({},d);if(void 0===t||!l[t])throw new Error("You need to provide a valid ID to change the cart item");void 0===a||a>0?l[t]={count:a||l[t].count,sizeId:n||l[t].sizeId}:delete l[t],o(l)}),[d,o]),p=Object(n.useCallback)((function(){o({})}),[o]);return Object(n.useEffect)((function(){if(!l)return window.addToCart=m,function(){delete window.addToCart}}),[m]),{cartItems:d,addToCart:m,removeFromCart:s,clearCart:p,changeCartItem:f}}},UxAK:function(e,t,a){"use strict";a.r(t),a.d(t,"pageQuery",(function(){return p}));a("/8Fb"),a("rGqo"),a("yt8O"),a("Btvt"),a("XfO3"),a("9AAn");var n=a("FdF9"),l=a("Wbzz"),c=a("Bl7J"),r=(a("Vbzp"),a("vrFN")),i=a("9I9J"),u=a("Zgqk"),d=a("QXb7"),o=(a("Ugww"),a("10BB")),m=a("5NPn"),s=a("MD2k"),f=a("dJDK");t.default=function(e){var t=e.data,a=Object(m.a)(),p=a.cartItems,v=a.clearCart,E=new Map(t.allStrapiItem.edges.map((function(e){return[e.node.id,e.node]}))),b=Object.entries(p).map((function(e){var t=e[0],a=e[1],n=a.count,l=a.sizeId;return{item:E.get(t),count:n,sizeId:l}})),h=Object(s.a)(""),g=h[0],_=h[1],k=Object(s.a)(""),w=k[0],y=k[1],N=Object(s.a)(""),I=N[0],O=N[1],z=Object(s.a)(""),C=z[0],j=z[1],F=Object(s.a)(""),S=F[0],B=F[1],x=b.map((function(e){var t=e.item,a=e.count,n=e.sizeId;return{itemId:+t.id.substring(5),sizeId:n,count:a}})),A=Object(f.a)("https://wowshop-api.wave909.com/order","POST",{fullName:g,phone:w,city:I,address:C,email:S,orderItems:x}),J=A[0],T=A[1];Object(n.useEffect)((function(){200===J.statusCode&&(v(),Object(l.navigate)("order-complete"))}),[J]);var D=!!(g&&w&&I&&C&&S);return n.default.createElement(c.a,null,n.default.createElement(r.a,{title:"Home"}),n.default.createElement("div",{className:"checkout__nav"},n.default.createElement(l.Link,{to:"boys"},n.default.createElement(o.a,{color:"#87338B"})," Вернуться к покупкам")),n.default.createElement("div",{className:"checkout"},n.default.createElement("div",{className:"checkout__items"},n.default.createElement("h2",null,"В заказе"),b.map((function(e){var t=e.item,a=e.count,l=e.sizeId;return n.default.createElement(u.a,{item:t,sizeId:l,count:a,key:t.id})})),n.default.createElement("div",{className:"checkout__total-label"},"Итого:",n.default.createElement("span",{className:"cart__total-number"},b.map((function(e){var t=e.item,a=e.count;return t.price*a})).reduce((function(e,t){return e+t}),0),".-"))),n.default.createElement("div",{className:"checkout__form"},n.default.createElement("h1",null,"Оформление заказа"),n.default.createElement("p",{className:"checkout__tip"},"Заполните все поля, для завершения"),n.default.createElement(i.a,{placeholder:"ФИО",value:g,onChange:_}),n.default.createElement(i.a,{placeholder:"Телефон",value:w,onChange:y,faded:!g}),n.default.createElement(i.a,{placeholder:"Город доставки",value:I,onChange:O,faded:!w}),n.default.createElement(i.a,{placeholder:"Адрес доставки",value:C,onChange:j,faded:!I}),n.default.createElement(i.a,{placeholder:"Email",value:S,onChange:B,faded:!C}),n.default.createElement("p",{className:"checkout__privacy-policy__description"},"Нажимая «Отправить заказ» вы соглашаетесь с ",n.default.createElement("span",{className:"checkout__privacy-policy__link"},"политикой конфиденциальности")),n.default.createElement(d.a,{disabled:!D||J.loading,onClick:T},"Отправить заказ",n.default.createElement("div",{className:"send"})))))};var p="1702985269"},Vbzp:function(e,t,a){"use strict";a("f3/d");var n=a("Wbzz"),l=a("FdF9"),c=(a("9eSz"),a("ZWVK"),a("bg8b"));t.a=function(e){var t=e.item,a=e.addToCart;return l.default.createElement(n.Link,{to:"/"+t.id,style:{display:"flex"},state:{modal:!0}},l.default.createElement("div",{key:t.id,className:"itemBlock"},l.default.createElement(c.a,{small:!0,images:t.images}),l.default.createElement("div",{className:"itemData"},l.default.createElement("p",{className:"itemName"},t.name),l.default.createElement("p",{className:"itemPrice"},t.price,".-"),l.default.createElement("button",{onClick:function(e){a(t.id,1),e.preventDefault()},className:"itemCart"}))))}},Zgqk:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("XfO3"),a("HEwt"),a("a1Th"),a("Btvt"),a("rE2o"),a("ioFf"),a("rGqo"),a("dRSK"),a("f3/d"),a("Wbzz");var n=a("FdF9"),l=a("9eSz"),c=a.n(l);a("ZdBo");function r(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(e){var t=e.item,a=e.count,l=e.sizeId;e.removeFromCart;return n.default.createElement("div",{key:t.id,style:{display:"flex",alignItems:"center",marginBottom:16}},n.default.createElement(c.a,{fixed:t.images[0].localFile.childImageSharp.fluid,style:{width:92,height:92,borderRadius:10,marginRight:20}}),n.default.createElement("div",{style:{flex:1}},n.default.createElement("span",{className:"checkout-item__header"},t.name),n.default.createElement("div",{className:"checkout-item__controls-row"},n.default.createElement("span",null,n.default.createElement("b",null,"Размер:")," ",t.sizetable.find((function(e){return e.id===l})).size)),n.default.createElement("div",{className:"checkout-item__controls-row"},n.default.createElement("span",null,n.default.createElement("b",null,a," шт.")),n.default.createElement("span",null,t.price,".-"),n.default.createElement("div",{className:"checkout-item__total"},t.price*a,".-"))))};t.b=function(e){var t=e.item,a=e.count,l=e.sizeId,i=(e.removeFromCart,e.changeCartItem);return n.default.createElement("div",{key:t.id,style:{display:"flex",alignItems:"center",marginBottom:16}},n.default.createElement(c.a,{fixed:t.images[0].localFile.childImageSharp.fluid,style:{width:92,height:92,borderRadius:10,marginRight:20}}),n.default.createElement("div",{style:{flex:1}},n.default.createElement("span",{className:"cart-item__header"},t.name),n.default.createElement("div",{className:"cart-item__controls-row"},n.default.createElement("span",null,n.default.createElement("b",null,"Размер:"),n.default.createElement("select",{className:"select",name:"dropdown",onChange:function(e){var a=e.target;return i({id:t.id,sizeId:+a.value})}},t.sizetable.map((function(e){var t=e.id,a=e.size;return n.default.createElement("option",{value:t,selected:t===l},a)})))),n.default.createElement("span",null,n.default.createElement("select",{className:"select",name:"dropdown",onChange:function(e){var a=e.target;return i({id:t.id,count:+a.value})}},[].concat(r(a>5?[a]:[]),[1,2,3,4,5,0]).map((function(e){return n.default.createElement("option",{value:e,selected:e===a},e," шт.")})))),n.default.createElement("span",null,t.price,".-"))),n.default.createElement("span",{className:"cart-item__total"},t.price*a,".-"))}}}]);
//# sourceMappingURL=component---src-pages-checkout-js-2d395b55a29684101352.js.map